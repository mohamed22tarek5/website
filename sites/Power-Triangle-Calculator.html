<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Triangle Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4e9eff;
            --primary-dark: #3a6cf4;
            --primary-light: #6ab1ff;
            --secondary-color: #9b59b6;
            --background-dark: #121212;
            --background-darker: #0a0a0a;
            --background-secondary: #1a1a1a;
            --card-dark: #1e1e1e;
            --card-light: #252525;
            --text-light: #ffffff;
            --text-muted: #aaaaaa;
            --success-color: #4caf50;
            --error-color: #f44336;
            --warning-color: #ff9800;
            --transition-speed: 0.3s;
            --border-radius: 12px;
            --box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            --box-shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        /* Light mode variables */
        [data-theme="light"] {
            --background-dark: #f5f7fa;
            --background-darker: #e8ebf0;
            --background-secondary: #ffffff;
            --card-dark: #ffffff;
            --card-light: #f9f9f9;
            --text-light: #333333;
            --text-muted: #666666;
            --box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            --box-shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-dark);
            color: var(--text-light);
            line-height: 1.6;
            transition: background-color var(--transition-speed) ease;
            padding: 20px;
            min-height: 100vh;
        }

        .calculator-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .page-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--border-radius);
            color: white;
            box-shadow: var(--box-shadow);
        }

        .page-header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .page-header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
        }

        .calculator {
            border: 1px solid var(--background-secondary);
            padding: 25px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            background-color: var(--card-dark);
            box-shadow: var(--box-shadow);
            transition: all var(--transition-speed) ease;
        }

        .calculator:hover {
            box-shadow: var(--box-shadow-hover);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-light);
            font-weight: 500;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--background-secondary);
            border-radius: var(--border-radius);
            background-color: var(--background-secondary);
            color: var(--text-light);
            font-family: inherit;
            font-size: 1em;
            transition: all var(--transition-speed) ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(78, 158, 255, 0.2);
        }

        .input-field.error {
            border-color: var(--error-color);
            box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.2);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 20px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9em;
            transition: all var(--transition-speed) ease;
            cursor: pointer;
            border: none;
            outline: none;
            width: 100%;
            margin-bottom: 10px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 5px 15px rgba(78, 158, 255, 0.4);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(78, 158, 255, 0.6);
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-success:hover {
            background-color: #45a049;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .result-box {
            padding: 20px;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-color);
            transition: all var(--transition-speed) ease;
            background-color: rgba(78, 158, 255, 0.1);
        }

        .result-box:hover {
            transform: translateY(-3px);
            box-shadow: var(--box-shadow-hover);
        }

        .result-box.success {
            border-left-color: var(--success-color);
            background-color: rgba(76, 175, 80, 0.1);
        }

        .result-box.warning {
            border-left-color: var(--warning-color);
            background-color: rgba(255, 152, 0, 0.1);
        }

        .result-box.error {
            border-left-color: var(--error-color);
            background-color: rgba(244, 67, 54, 0.1);
        }

        .result-label {
            font-size: 0.9em;
            color: var(--text-muted);
            margin-bottom: 5px;
        }

        .result-value {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--text-light);
        }

        .info-box {
            margin-top: 20px;
            padding: 20px;
            background: rgba(241, 196, 15, 0.1);
            border-radius: var(--border-radius);
            border-left: 4px solid #f1c40f;
            color: var(--text-light);
            box-shadow: var(--box-shadow);
        }

        .info-box h3 {
            color: #f1c40f;
            margin-bottom: 10px;
        }

        .info-box ul {
            padding-left: 20px;
        }

        .info-box li {
            margin-bottom: 5px;
        }

        /* Dark Mode Toggle */
        .theme-toggle {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--card-dark);
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            z-index: 999;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 100px;
            right: 30px;
            padding: 15px 25px;
            background-color: var(--success-color);
            color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background-color: var(--error-color);
        }

        /* Footer */
        footer {
            background-color: var(--card-dark);
            color: var(--text-light);
            text-align: center;
            padding: 30px;
            margin-top: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .social-footer {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .social-footer a {
            color: var(--text-light);
            font-size: 1.5em;
            margin: 0 15px;
            transition: all var(--transition-speed) ease;
            display: inline-block;
        }

        .social-footer a:hover {
            color: var(--primary-color);
            transform: translateY(-5px);
        }

        .footer-bottom {
            margin-top: 20px;
            font-size: 0.9em;
            opacity: 0.8;
        }

        /* Power Triangle Visualization */
        .triangle-container {
            margin: 30px 0;
            text-align: center;
        }

        .power-triangle {
            max-width: 400px;
            margin: 0 auto;
            position: relative;
        }

        .triangle-svg {
            width: 100%;
            height: 300px;
        }

        .triangle-side {
            stroke-width: 3;
            fill: none;
        }

        .real-power {
            stroke: var(--success-color);
        }

        .reactive-power {
            stroke: var(--warning-color);
        }

        .apparent-power {
            stroke: var(--primary-color);
        }

        .angle-arc {
            stroke: var(--text-muted);
            stroke-width: 1.5;
            fill: none;
        }

        .power-label {
            font-size: 14px;
            font-weight: bold;
        }

        .real-label {
            fill: var(--success-color);
        }

        .reactive-label {
            fill: var(--warning-color);
        }

        .apparent-label {
            fill: var(--primary-color);
        }

        .angle-label {
            fill: var(--text-muted);
            font-size: 12px;
        }

        /* Input mode selector */
        .input-mode {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mode-btn {
            flex: 1;
            padding: 12px;
            background: var(--background-secondary);
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
            color: var(--text-light);
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            text-align: center;
        }

        .mode-btn:hover {
            background: var(--primary-light);
        }

        .mode-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .page-header h1 {
                font-size: 2rem;
            }
            
            .theme-toggle {
                width: 40px;
                height: 40px;
                font-size: 1em;
                bottom: 20px;
                left: 20px;
            }
            
            .input-mode {
                flex-direction: column;
            }
            
            .power-triangle {
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <div class="page-header">
            <h1><i class="fas fa-bolt"></i> Power Triangle Calculator</h1>
            <p>Visualize and calculate AC power relationships</p>
        </div>
        
        <div class="calculator">
            <h2>Power Triangle Calculator</h2>
            <p>Enter any two values to calculate the complete power triangle.</p>
            
            <div class="input-mode">
                <button class="mode-btn active" onclick="setInputMode('pq')">P & Q</button>
                <button class="mode-btn" onclick="setInputMode('ps')">P & S</button>
                <button class="mode-btn" onclick="setInputMode('qs')">Q & S</button>
                <button class="mode-btn" onclick="setInputMode('pf')">P & PF</button>
            </div>
            
            <div id="inputFields">
                <div class="input-group">
                    <label for="realPower">Real Power (P) - Watts</label>
                    <input type="number" id="realPower" class="input-field" placeholder="e.g., 800" step="0.1" min="0" value="800">
                </div>
                
                <div class="input-group">
                    <label for="reactivePower">Reactive Power (Q) - VAR</label>
                    <input type="number" id="reactivePower" class="input-field" placeholder="e.g., 600" step="0.1" min="0" value="600">
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="calculatePowerTriangle()">
                <i class="fas fa-calculator"></i> Calculate Power Triangle
            </button>
            
            <div class="triangle-container">
                <div class="power-triangle">
                    <svg class="triangle-svg" viewBox="0 0 400 300" id="triangleSvg">
                        <!-- Triangle will be drawn here by JavaScript -->
                    </svg>
                </div>
            </div>
            
            <div class="results-grid">
                <div class="result-box" id="apparentPowerBox">
                    <div class="result-label">Apparent Power (S)</div>
                    <div class="result-value" id="apparentPowerResult">-- VA</div>
                </div>
                
                <div class="result-box success" id="powerFactorBox">
                    <div class="result-label">Power Factor</div>
                    <div class="result-value" id="powerFactorResult">--</div>
                </div>
                
                <div class="result-box warning" id="phaseAngleBox">
                    <div class="result-label">Phase Angle (θ)</div>
                    <div class="result-value" id="phaseAngleResult">--°</div>
                </div>
                
                <div class="result-box" id="reactiveFactorBox">
                    <div class="result-label">Reactive Factor</div>
                    <div class="result-value" id="reactiveFactorResult">--</div>
                </div>
            </div>
        </div>
        
        <div class="info-box">
            <h3><i class="fas fa-info-circle"></i> Power Triangle Theory</h3>
            <ul>
                <li><strong>Real Power (P)</strong>: Measured in Watts (W), represents useful work</li>
                <li><strong>Reactive Power (Q)</strong>: Measured in Volt-Amps Reactive (VAR), represents energy stored and returned</li>
                <li><strong>Apparent Power (S)</strong>: Measured in Volt-Amps (VA), the vector sum of P and Q</li>
                <li><strong>Power Factor (PF)</strong>: Ratio of real power to apparent power (P/S)</li>
                <li><strong>Phase Angle (θ)</strong>: Angle between voltage and current waveforms</li>
                <li><strong>Power Triangle Formula</strong>: S² = P² + Q²</li>
            </ul>
        </div>
        
        <div class="info-box">
            <h3><i class="fas fa-lightbulb"></i> Practical Applications</h3>
            <ul>
                <li><strong>Power Factor Correction</strong>: Add capacitors to reduce reactive power</li>
                <li><strong>Transformer Sizing</strong>: Apparent power determines transformer capacity</li>
                <li><strong>Energy Efficiency</strong>: Higher power factor reduces energy losses</li>
                <li><strong>Motor Loads</strong>: Inductive loads create lagging power factor</li>
                <li><strong>Capacitor Banks</strong>: Used to improve power factor in industrial settings</li>
            </ul>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Dark Mode Toggle -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Footer -->
    <footer>
        <div class="social-footer">
            <a href="https://www.linkedin.com/in/mohamedtarek225" target="_blank" aria-label="LinkedIn" rel="noopener noreferrer"><i class="fab fa-linkedin"></i></a>
            <a href="https://github.com/mohamed22tarek5" target="_blank" aria-label="GitHub" rel="noopener noreferrer"><i class="fab fa-github"></i></a>
            <a href="https://www.instagram.com/_m7md_tarek_/?igshid=YmMyMTA2M2Y%3D" target="_blank" aria-label="Instagram" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
            <a href="https://wa.me/+201090637406" target="_blank" aria-label="WhatsApp" rel="noopener noreferrer"><i class="fab fa-whatsapp"></i></a>
        </div>
        <div class="footer-bottom">
            &copy; <span id="current-year">2025</span> Mohamed Tarek Portfolio. All Rights Reserved.
            &copy; M.T.A.
        </div>
    </footer>

    <script>
        // Global variables
        let currentInputMode = 'pq';
        
        // Dark/Light Mode Toggle
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('i');
        
        // Check for saved theme preference
        const currentTheme = localStorage.getItem('theme') || 
                           (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        
        if (currentTheme === 'dark') {
            document.body.setAttribute('data-theme', 'dark');
            themeIcon.classList.replace('fa-moon', 'fa-sun');
        } else {
            document.body.setAttribute('data-theme', 'light');
            themeIcon.classList.replace('fa-sun', 'fa-moon');
        }
        
        themeToggle.addEventListener('click', () => {
            if (document.body.getAttribute('data-theme') === 'light') {
                document.body.setAttribute('data-theme', 'dark');
                themeIcon.classList.replace('fa-moon', 'fa-sun');
                localStorage.setItem('theme', 'dark');
            } else {
                document.body.setAttribute('data-theme', 'light');
                themeIcon.classList.replace('fa-sun', 'fa-moon');
                localStorage.setItem('theme', 'light');
            }
        });

        // Set input mode
        function setInputMode(mode) {
            currentInputMode = mode;
            
            // Update active button
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update input fields
            updateInputFields();
        }

        // Update input fields based on selected mode
        function updateInputFields() {
            const inputFields = document.getElementById('inputFields');
            let html = '';
            
            switch(currentInputMode) {
                case 'pq':
                    html = `
                        <div class="input-group">
                            <label for="realPower">Real Power (P) - Watts</label>
                            <input type="number" id="realPower" class="input-field" placeholder="e.g., 800" step="0.1" min="0" value="800">
                        </div>
                        
                        <div class="input-group">
                            <label for="reactivePower">Reactive Power (Q) - VAR</label>
                            <input type="number" id="reactivePower" class="input-field" placeholder="e.g., 600" step="0.1" min="0" value="600">
                        </div>
                    `;
                    break;
                    
                case 'ps':
                    html = `
                        <div class="input-group">
                            <label for="realPower">Real Power (P) - Watts</label>
                            <input type="number" id="realPower" class="input-field" placeholder="e.g., 800" step="0.1" min="0" value="800">
                        </div>
                        
                        <div class="input-group">
                            <label for="apparentPower">Apparent Power (S) - VA</label>
                            <input type="number" id="apparentPower" class="input-field" placeholder="e.g., 1000" step="0.1" min="0" value="1000">
                        </div>
                    `;
                    break;
                    
                case 'qs':
                    html = `
                        <div class="input-group">
                            <label for="reactivePower">Reactive Power (Q) - VAR</label>
                            <input type="number" id="reactivePower" class="input-field" placeholder="e.g., 600" step="0.1" min="0" value="600">
                        </div>
                        
                        <div class="input-group">
                            <label for="apparentPower">Apparent Power (S) - VA</label>
                            <input type="number" id="apparentPower" class="input-field" placeholder="e.g., 1000" step="0.1" min="0" value="1000">
                        </div>
                    `;
                    break;
                    
                case 'pf':
                    html = `
                        <div class="input-group">
                            <label for="realPower">Real Power (P) - Watts</label>
                            <input type="number" id="realPower" class="input-field" placeholder="e.g., 800" step="0.1" min="0" value="800">
                        </div>
                        
                        <div class="input-group">
                            <label for="powerFactor">Power Factor</label>
                            <input type="number" id="powerFactor" class="input-field" placeholder="e.g., 0.8" step="0.01" min="0" max="1" value="0.8">
                        </div>
                    `;
                    break;
            }
            
            inputFields.innerHTML = html;
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast';
            
            if (type === 'error') {
                toast.classList.add('error');
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Validate inputs
        function validateInputs() {
            let isValid = true;
            
            // Clear previous errors
            document.querySelectorAll('.input-field').forEach(field => {
                field.classList.remove('error');
            });
            
            // Validate based on current input mode
            switch(currentInputMode) {
                case 'pq':
                    const p1 = parseFloat(document.getElementById('realPower').value);
                    const q1 = parseFloat(document.getElementById('reactivePower').value);
                    
                    if (isNaN(p1) || p1 <= 0) {
                        document.getElementById('realPower').classList.add('error');
                        isValid = false;
                    }
                    
                    if (isNaN(q1) || q1 < 0) {
                        document.getElementById('reactivePower').classList.add('error');
                        isValid = false;
                    }
                    break;
                    
                case 'ps':
                    const p2 = parseFloat(document.getElementById('realPower').value);
                    const s2 = parseFloat(document.getElementById('apparentPower').value);
                    
                    if (isNaN(p2) || p2 <= 0) {
                        document.getElementById('realPower').classList.add('error');
                        isValid = false;
                    }
                    
                    if (isNaN(s2) || s2 <= 0) {
                        document.getElementById('apparentPower').classList.add('error');
                        isValid = false;
                    }
                    
                    if (p2 > s2) {
                        document.getElementById('realPower').classList.add('error');
                        document.getElementById('apparentPower').classList.add('error');
                        showToast('Real power cannot exceed apparent power!', 'error');
                        isValid = false;
                    }
                    break;
                    
                case 'qs':
                    const q3 = parseFloat(document.getElementById('reactivePower').value);
                    const s3 = parseFloat(document.getElementById('apparentPower').value);
                    
                    if (isNaN(q3) || q3 < 0) {
                        document.getElementById('reactivePower').classList.add('error');
                        isValid = false;
                    }
                    
                    if (isNaN(s3) || s3 <= 0) {
                        document.getElementById('apparentPower').classList.add('error');
                        isValid = false;
                    }
                    
                    if (q3 > s3) {
                        document.getElementById('reactivePower').classList.add('error');
                        document.getElementById('apparentPower').classList.add('error');
                        showToast('Reactive power cannot exceed apparent power!', 'error');
                        isValid = false;
                    }
                    break;
                    
                case 'pf':
                    const p4 = parseFloat(document.getElementById('realPower').value);
                    const pf = parseFloat(document.getElementById('powerFactor').value);
                    
                    if (isNaN(p4) || p4 <= 0) {
                        document.getElementById('realPower').classList.add('error');
                        isValid = false;
                    }
                    
                    if (isNaN(pf) || pf <= 0 || pf > 1) {
                        document.getElementById('powerFactor').classList.add('error');
                        isValid = false;
                    }
                    break;
            }
            
            return isValid;
        }

        // Calculate power triangle
        function calculatePowerTriangle() {
            // Validate inputs
            if (!validateInputs()) {
                showToast('Please check your input values!', 'error');
                return;
            }
            
            let P, Q, S, PF, θ;
            
            // Calculate based on input mode
            switch(currentInputMode) {
                case 'pq':
                    P = parseFloat(document.getElementById('realPower').value);
                    Q = parseFloat(document.getElementById('reactivePower').value);
                    S = Math.sqrt(P * P + Q * Q);
                    PF = P / S;
                    θ = Math.atan2(Q, P) * (180 / Math.PI);
                    break;
                    
                case 'ps':
                    P = parseFloat(document.getElementById('realPower').value);
                    S = parseFloat(document.getElementById('apparentPower').value);
                    Q = Math.sqrt(S * S - P * P);
                    PF = P / S;
                    θ = Math.acos(PF) * (180 / Math.PI);
                    break;
                    
                case 'qs':
                    Q = parseFloat(document.getElementById('reactivePower').value);
                    S = parseFloat(document.getElementById('apparentPower').value);
                    P = Math.sqrt(S * S - Q * Q);
                    PF = P / S;
                    θ = Math.asin(Q / S) * (180 / Math.PI);
                    break;
                    
                case 'pf':
                    P = parseFloat(document.getElementById('realPower').value);
                    PF = parseFloat(document.getElementById('powerFactor').value);
                    S = P / PF;
                    θ = Math.acos(PF) * (180 / Math.PI);
                    Q = S * Math.sin(θ * Math.PI / 180);
                    break;
            }
            
            // Update results
            document.getElementById('apparentPowerResult').textContent = `${S.toFixed(2)} VA`;
            document.getElementById('powerFactorResult').textContent = PF.toFixed(4);
            document.getElementById('phaseAngleResult').textContent = `${θ.toFixed(2)}°`;
            document.getElementById('reactiveFactorResult').textContent = (Q / S).toFixed(4);
            
            // Draw power triangle
            drawPowerTriangle(P, Q, S, θ);
            
            showToast('Power triangle calculated successfully!');
        }

        // Draw power triangle visualization
        function drawPowerTriangle(P, Q, S, θ) {
            const svg = document.getElementById('triangleSvg');
            const scale = 150 / Math.max(P, Q, S); // Scale to fit in viewport
            
            // Calculate coordinates
            const baseX = 100;
            const baseY = 250;
            const pX = baseX + P * scale;
            const pY = baseY;
            const qX = baseX;
            const qY = baseY - Q * scale;
            const sX = pX;
            const sY = qY;
            
            // Clear previous drawing
            svg.innerHTML = '';
            
            // Draw triangle sides
            const triangle = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
            triangle.setAttribute('points', `${baseX},${baseY} ${pX},${pY} ${sX},${sY}`);
            triangle.setAttribute('fill', 'rgba(124, 192, 255, 0.1)');
            triangle.setAttribute('stroke', 'var(--primary-color)');
            triangle.setAttribute('stroke-width', '1');
            svg.appendChild(triangle);
            
            // Draw real power (P) - horizontal line
            const realLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            realLine.setAttribute('x1', baseX);
            realLine.setAttribute('y1', baseY);
            realLine.setAttribute('x2', pX);
            realLine.setAttribute('y2', pY);
            realLine.setAttribute('class', 'triangle-side real-power');
            svg.appendChild(realLine);
            
            // Draw reactive power (Q) - vertical line
            const reactiveLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            reactiveLine.setAttribute('x1', baseX);
            reactiveLine.setAttribute('y1', baseY);
            reactiveLine.setAttribute('x2', qX);
            reactiveLine.setAttribute('y2', qY);
            reactiveLine.setAttribute('class', 'triangle-side reactive-power');
            svg.appendChild(reactiveLine);
            
            // Draw apparent power (S) - hypotenuse
            const apparentLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            apparentLine.setAttribute('x1', baseX);
            apparentLine.setAttribute('y1', baseY);
            apparentLine.setAttribute('x2', sX);
            apparentLine.setAttribute('y2', sY);
            apparentLine.setAttribute('class', 'triangle-side apparent-power');
            svg.appendChild(apparentLine);
            
            // Draw angle arc
            const arcRadius = 30;
            const arc = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            arc.setAttribute('d', `M${baseX + arcRadius},${baseY} A${arcRadius},${arcRadius} 0 0,1 ${baseX + arcRadius * Math.cos(θ * Math.PI / 180)},${baseY - arcRadius * Math.sin(θ * Math.PI / 180)}`);
            arc.setAttribute('class', 'angle-arc');
            svg.appendChild(arc);
            
            // Add labels
            const realLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            realLabel.setAttribute('x', (baseX + pX) / 2);
            realLabel.setAttribute('y', baseY + 20);
            realLabel.setAttribute('class', 'power-label real-label');
            realLabel.textContent = `P = ${P.toFixed(1)} W`;
            svg.appendChild(realLabel);
            
            const reactiveLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            reactiveLabel.setAttribute('x', baseX - 60);
            reactiveLabel.setAttribute('y', (baseY + qY) / 2);
            reactiveLabel.setAttribute('class', 'power-label reactive-label');
            reactiveLabel.textContent = `Q = ${Q.toFixed(1)} VAR`;
            svg.appendChild(reactiveLabel);
            
            const apparentLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            apparentLabel.setAttribute('x', (baseX + sX) / 2 + 10);
            apparentLabel.setAttribute('y', (baseY + sY) / 2 - 10);
            apparentLabel.setAttribute('class', 'power-label apparent-label');
            apparentLabel.textContent = `S = ${S.toFixed(1)} VA`;
            svg.appendChild(apparentLabel);
            
            const angleLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            angleLabel.setAttribute('x', baseX + 20);
            angleLabel.setAttribute('y', baseY - 15);
            angleLabel.setAttribute('class', 'angle-label');
            angleLabel.textContent = `θ = ${θ.toFixed(1)}°`;
            svg.appendChild(angleLabel);
        }

        // Initialize
        window.onload = function() {
            // Set initial input fields
            updateInputFields();
            
            // Calculate initial power triangle
            calculatePowerTriangle();
            
            // Set current year in footer
            document.getElementById('current-year').textContent = new Date().getFullYear();
        };
    </script>
</body>
</html>