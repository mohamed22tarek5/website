<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mastering Linux Commands: A Comprehensive Guide</title>
  <style>
    :root {
      --bg: #0b1020;
      --card: #121831;
      --ink: #e7ecf6;
      --muted: #a8b1c7;
      --accent: #7cc0ff;
      --accent-2: #9be2b1;
      --border: #233056;
      --code-bg: #0f1630;
      --kbd-bg: #1a2347;
      --search-bg: #0c142b;
    }
    
    /* Light mode variables */
    [data-theme="light"] {
      --bg: #f5f7fa;
      --card: #ffffff;
      --ink: #2d3748;
      --muted: #718096;
      --accent: #3182ce;
      --accent-2: #38a169;
      --border: #e2e8f0;
      --code-bg: #f7fafc;
      --kbd-bg: #edf2f7;
      --search-bg: #ffffff;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--ink);
      background: var(--bg);
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    .wrap { max-width: 1100px; margin: 0 auto; padding: 24px; }
    
    header { 
      position: sticky; 
      top: 0; 
      backdrop-filter: blur(6px); 
      background: rgba(11,16,32,0.6); 
      border-bottom: 1px solid var(--border); 
      z-index: 10; 
    }
    
    [data-theme="light"] header {
      background: rgba(245,247,250,0.6);
    }
    
    header .wrap { 
      display: flex; 
      align-items: center; 
      justify-content: space-between;
      gap: 16px; 
      padding-block: 12px; 
    }
    
    h1 { font-size: 2rem; margin: 0; letter-spacing: .2px; }
    .subtitle { color: var(--muted); font-size: .95rem; }
    
    .grid { display: grid; grid-template-columns: 290px 1fr; gap: 24px; align-items: start; }
    @media (max-width: 960px) { .grid { grid-template-columns: 1fr; } nav { position: static; } }

    nav { 
      position: sticky; 
      top: 64px; 
      max-height: calc(100dvh - 96px); 
      overflow: auto; 
      padding: 16px; 
      border: 1px solid var(--border); 
      background: var(--card); 
      border-radius: 14px; 
    }
    
    nav h2 { margin-top: 0; font-size: 1.05rem; }
    nav a { display: block; color: var(--ink); text-decoration: none; padding: 6px 8px; border-radius: 8px; }
    nav a:hover { background: var(--kbd-bg); }
    nav .toc-section { margin-bottom: 12px; }
    nav .toc-section > a { font-weight: 600; color: var(--accent); }
    nav .toc-sub a { color: var(--muted); font-size: .92rem; padding-left: 14px; }

    main { border: 1px solid var(--border); background: var(--card); border-radius: 14px; padding: 24px; }
    section { scroll-margin-top: 96px; }
    h2 { margin-top: 32px; border-bottom: 1px dashed var(--border); padding-bottom: 8px; }
    h3 { color: var(--accent); margin-top: 20px; }
    p { margin: 8px 0 14px; }
    
    code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    pre { 
      position: relative; 
      background: var(--code-bg); 
      border: 1px solid var(--border); 
      border-radius: 12px; 
      padding: 14px 14px 16px; 
      overflow: auto; 
    }
    
    pre code { color: var(--ink); }
    
    .copy { 
      position: absolute; 
      right: 10px; 
      top: 10px; 
      background: var(--search-bg); 
      color: var(--ink); 
      border: 1px solid var(--border); 
      border-radius: 8px; 
      padding: 6px 10px; 
      font-size: .85rem; 
      cursor: pointer; 
      transition: all 0.2s ease;
    }
    
    .copy:hover {
      background: var(--accent);
      color: white;
    }
    
    .tip, .note, .warn { 
      border: 1px solid var(--border); 
      padding: 10px 12px; 
      border-radius: 10px; 
      margin: 10px 0 16px; 
    }
    
    .tip { background: rgba(155,226,177,.06); }
    .note { background: rgba(124,192,255,.06); }
    .warn { background: rgba(255,137,124,.06); }
    
    kbd { 
      background: var(--kbd-bg); 
      border: 1px solid var(--border); 
      border-bottom-width: 2px; 
      border-radius: 6px; 
      padding: 2px 6px; 
      font-size: .9em; 
    }
    
    table { width: 100%; border-collapse: collapse; margin: 12px 0 18px; }
    th, td { border: 1px solid var(--border); padding: 8px 10px; text-align: left; }
    th { background: var(--kbd-bg); }
    
    .footer { color: var(--muted); font-size: .9rem; margin-top: 32px; }
    
    .chap-tag { 
      display:inline-block; 
      font-size:.78rem; 
      letter-spacing:.3px; 
      color:#0b1020; 
      background: linear-gradient(90deg, var(--accent), var(--accent-2)); 
      padding:2px 8px; 
      border-radius:999px; 
      margin-left:6px; 
    }
    
    .cmd { color: var(--accent-2); font-weight: 600; }
    
    .explain { 
      border: 1px solid var(--border); 
      background: rgba(124,192,255,.06); 
      padding: 12px 14px; 
      border-radius: 10px; 
      margin: 10px 0 18px; 
    }
    
    .explain h4 { margin: 0 0 6px; font-size: 1rem; color: var(--accent); }
    .explain ul { margin: 6px 0 0 18px; }
    .explain li { margin: 4px 0; }
    
    /* Search functionality */
    .search-container {
      position: relative;
      margin-bottom: 20px;
    }
    
    .search-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--search-bg);
      color: var(--ink);
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .search-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(124,192,255,0.2);
    }
    
    .search-results {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      margin-top: 5px;
      max-height: 300px;
      overflow-y: auto;
      z-index: 100;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      display: none;
    }
    
    .search-result-item {
      padding: 10px 15px;
      border-bottom: 1px solid var(--border);
      cursor: pointer;
      transition: background 0.2s ease;
    }
    
    .search-result-item:hover {
      background: var(--kbd-bg);
    }
    
    .search-result-item:last-child {
      border-bottom: none;
    }
    
    .search-highlight {
      background-color: rgba(124,192,255,0.3);
      padding: 0 2px;
      border-radius: 3px;
    }
    
    /* Theme toggle */
    .theme-toggle {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 50%;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--ink);
      transition: all 0.3s ease;
    }
    
    .theme-toggle:hover {
      background: var(--kbd-bg);
      transform: scale(1.05);
    }
    
    /* Header actions */
    .header-actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    /* Bookmark functionality */
    .bookmark-btn {
      background: none;
      border: none;
      color: var(--muted);
      cursor: pointer;
      font-size: 1.2rem;
      transition: all 0.3s ease;
      padding: 5px;
    }
    
    .bookmark-btn:hover {
      color: var(--accent);
    }
    
    .bookmark-btn.bookmarked {
      color: #ffd700;
    }
    
    /* Command execution simulation */
    .terminal {
      background: #1a1a1a;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: #00ff00;
      position: relative;
      overflow: hidden;
    }
    
    .terminal-prompt {
      color: #7cc0ff;
    }
    
    .terminal-command {
      color: #ffffff;
    }
    
    .terminal-output {
      color: #cccccc;
      margin-top: 10px;
    }
    
    .run-btn {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 0.85rem;
      cursor: pointer;
      margin-left: 10px;
      transition: background 0.3s ease;
    }
    
    .run-btn:hover {
      background: var(--accent-2);
    }
    
    /* Progress tracker */
    .progress-container {
      margin: 20px 0;
      background: var(--kbd-bg);
      border-radius: 10px;
      padding: 15px;
    }
    
    .progress-bar {
      height: 8px;
      background: var(--border);
      border-radius: 4px;
      overflow: hidden;
      margin-top: 10px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      border-radius: 4px;
      width: 0%;
      transition: width 0.5s ease;
    }
    
    /* Responsive improvements */
    @media (max-width: 768px) {
      .header .wrap {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .header-actions {
        align-self: flex-end;
      }
      
      .search-container {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      .wrap {
        padding: 15px;
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      main {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div>
        <h1>Mastering Linux Commands <span class="chap-tag">Reference</span></h1>
        <div class="subtitle">Concise, example-driven, beginner ↔ pro</div>
      </div>
      <div class="header-actions">
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </div>
  </header>

  <div class="wrap grid">
    <!-- TOC / Sidebar -->
    <nav aria-label="Table of contents">
      <h2>Contents</h2>
      <div id="toc"></div>
      
      <!-- Progress tracker -->
      <div class="progress-container">
        <div>Your Progress: <span id="progress-percent">0%</span></div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
      </div>
    </nav>

    <!-- Main content -->
    <main id="content">
      <!-- Search functionality -->
      <div class="search-container">
        <input type="text" id="search-input" class="search-input" placeholder="Search commands (e.g., 'grep', 'find', 'permissions')">
        <div class="search-results" id="search-results"></div>
      </div>
      
      <section id="ch1">
        <h2>Chapter 1: Navigating the Filesystem</h2>
        <h3 id="pwd"><span class="cmd">pwd</span> — Print Working Directory</h3>
        <p>Show the absolute path of the current directory.</p>
        <pre><button class="copy" data-clipboard>Copy</button><code>pwd
# /home/user</code></pre>
        <div class="note">Displays the full path from the root to your current location.</div>

        <h3 id="cd"><span class="cmd">cd [directory]</span> — Change Directory</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>cd /home/user/Documents</code></pre>
        <div class="tip">Use <code>cd ..</code> to go up one level.</div>

        <h3 id="ls"><span class="cmd">ls</span> — List Directory Contents</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>ls
ls -la   # long format incl. hidden files</code></pre>
      </section>

      <section id="ch2">
        <h2>Chapter 2: Getting Help and Finding Commands</h2>
        <h3 id="man"><span class="cmd">man [command]</span> — Manual Pages</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>man ls</code></pre>
        
        <h3 id="which"><span class="cmd">which [command]</span> — Locate Executable</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>which python
# /usr/bin/python</code></pre>
      </section>

      <section id="ch3">
        <h2>Chapter 3: Managing Directories and Files</h2>
        <h3 id="mkdir"><span class="cmd">mkdir [directory]</span> — Create Directory</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>mkdir new_folder</code></pre>
        
        <h3 id="rmdir"><span class="cmd">rmdir [directory]</span> — Remove Empty Directory</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>rmdir old_folder
# Use rm -r for non-empty directories</code></pre>
        
        <h3 id="rm"><span class="cmd">rm [file]</span> — Remove File</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>rm file.txt
rm -i file.txt   # interactive</code></pre>
        
        <h3 id="cp"><span class="cmd">cp [src] [dest]</span> — Copy</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>cp file.txt /home/user/backup/
cp -r dir/ /backup/   # recursive</code></pre>
        
        <h3 id="mv"><span class="cmd">mv [src] [dest]</span> — Move/Rename</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>mv file.txt ~/Documents/
mv oldname.txt newname.txt</code></pre>
        
        <h3 id="touch"><span class="cmd">touch [file]</span> — Create/Modify Timestamp</h3>
        <pre><button class="copy" data-clipboard>Copy</button><code>touch newfile.txt</code></pre>
      </section>

      <!-- More sections would continue here... -->
      
      <p class="footer">Tip: Use this as an in-terminal companion with <code>tldr</code> pages (<code>sudo apt install tldr</code> then <code>tldr tar</code>).</p>
    </main>
  </div>

  <script>
    // Build TOC automatically from h2/h3
    (function buildTOC(){
      const content = document.getElementById('content');
      const toc = document.getElementById('toc');
      const sections = content.querySelectorAll('section');
      const frag = document.createDocumentFragment();
      sections.forEach(sec => {
        const h2 = sec.querySelector('h2');
        if(!h2) return;
        const secLink = document.createElement('a');
        const secId = sec.id || h2.textContent.trim().toLowerCase().replace(/[^a-z0-9]+/g,'-');
        sec.id = secId;
        secLink.href = '#' + secId;
        secLink.textContent = h2.textContent;
        const secWrap = document.createElement('div');
        secWrap.className = 'toc-section';
        secWrap.appendChild(secLink);

        const h3s = sec.querySelectorAll('h3');
        if(h3s.length){
          const sub = document.createElement('div');
          sub.className = 'toc-sub';
          h3s.forEach(h3 => {
            const id = h3.id || h3.textContent.trim().toLowerCase().replace(/[^a-z0-9]+/g,'-');
            h3.id = id;
            const a = document.createElement('a');
            a.href = '#' + id;
            a.textContent = h3.textContent.replace(/\s+—.*/, '');
            sub.appendChild(a);
          });
          secWrap.appendChild(sub);
        }
        frag.appendChild(secWrap);
      });
      toc.appendChild(frag);
    })();

    // Copy-to-clipboard for code blocks
    document.querySelectorAll('[data-clipboard]').forEach(btn => {
      btn.addEventListener('click', () => {
        const code = btn.nextElementSibling.innerText;
        navigator.clipboard.writeText(code).then(() => {
          const old = btn.textContent; btn.textContent = 'Copied!';
          setTimeout(()=> btn.textContent = old, 1200);
        });
      });
    });
    
    // Dark/Light Mode Toggle
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = themeToggle.querySelector('i');
    
    // Check for saved theme preference or use preferred color scheme
    const currentTheme = localStorage.getItem('theme') || 
                       (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    
    if (currentTheme === 'dark') {
      document.body.setAttribute('data-theme', 'dark');
      themeIcon.classList.replace('fa-moon', 'fa-sun');
    } else {
      document.body.setAttribute('data-theme', 'light');
      themeIcon.classList.replace('fa-sun', 'fa-moon');
    }
    
    themeToggle.addEventListener('click', () => {
      if (document.body.getAttribute('data-theme') === 'light') {
        document.body.setAttribute('data-theme', 'dark');
        themeIcon.classList.replace('fa-moon', 'fa-sun');
        localStorage.setItem('theme', 'dark');
      } else {
        document.body.setAttribute('data-theme', 'light');
        themeIcon.classList.replace('fa-sun', 'fa-moon');
        localStorage.setItem('theme', 'light');
      }
    });
    
    // Search functionality
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('search-results');
    
    searchInput.addEventListener('input', function() {
      const query = this.value.toLowerCase().trim();
      
      if (query.length < 2) {
        searchResults.style.display = 'none';
        return;
      }
      
      // Clear previous results
      searchResults.innerHTML = '';
      
      // Find matching commands
      const commands = document.querySelectorAll('h3');
      let hasResults = false;
      
      commands.forEach(command => {
        const commandText = command.textContent.toLowerCase();
        const commandId = command.id;
        
        if (commandText.includes(query)) {
          hasResults = true;
          const resultItem = document.createElement('div');
          resultItem.className = 'search-result-item';
          
          // Highlight matching text
          const highlightedText = commandText.replace(
            new RegExp(query, 'gi'), 
            match => `<span class="search-highlight">${match}</span>`
          );
          
          resultItem.innerHTML = highlightedText;
          resultItem.addEventListener('click', () => {
            document.getElementById(commandId).scrollIntoView({ behavior: 'smooth' });
            searchResults.style.display = 'none';
            searchInput.value = '';
          });
          
          searchResults.appendChild(resultItem);
        }
      });
      
      if (hasResults) {
        searchResults.style.display = 'block';
      } else {
        searchResults.innerHTML = '<div class="search-result-item">No commands found</div>';
        searchResults.style.display = 'block';
      }
    });
    
    // Close search results when clicking outside
    document.addEventListener('click', function(event) {
      if (!searchInput.contains(event.target) && !searchResults.contains(event.target)) {
        searchResults.style.display = 'none';
      }
    });
    
    // Progress tracking
    function updateProgress() {
      const sections = document.querySelectorAll('section');
      const readSections = JSON.parse(localStorage.getItem('readSections') || '[]');
      const progressPercent = Math.round((readSections.length / sections.length) * 100);
      
      document.getElementById('progress-percent').textContent = `${progressPercent}%`;
      document.getElementById('progress-fill').style.width = `${progressPercent}%`;
    }
    
    // Mark section as read when scrolled into view
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const sectionId = entry.target.id;
          const readSections = JSON.parse(localStorage.getItem('readSections') || '[]');
          
          if (!readSections.includes(sectionId)) {
            readSections.push(sectionId);
            localStorage.setItem('readSections', JSON.stringify(readSections));
            updateProgress();
          }
        }
      });
    }, { threshold: 0.5 });
    
    // Observe all sections
    document.querySelectorAll('section').forEach(section => {
      observer.observe(section);
    });
    
    // Initialize progress
    updateProgress();
    
    // Explanations per command block
    (function injectExplanations(){
      const EXPLAINS = {
        pwd: {
          what: 'Prints the absolute path to your current working directory.',
          when: ['You got lost in the tree and need to confirm where you are.', 'Scripting: emit current dir for logs.'],
          pitfalls: ['In scripts, rely on $(pwd) rather than $PWD when portability is required.']
        },
        cd: {
          what: 'Changes the current directory to the path you provide.',
          when: ['Navigate to project folders quickly.', 'Use cd - to jump back to the previous directory.'],
          pitfalls: ['cd .. moves one level up; watch for spaces in paths—quote them.']
        },
        ls: {
          what: 'Lists files and directories in the current (or given) path.',
          when: ['Quick overview of contents.', 'Use -la to include hidden files and metadata.'],
          pitfalls: ['Color/format may differ by distro; use -h with -l for human sizes.']
        },
        man: { what: 'Opens the manual page for a command.', when: ['Learn flags, env vars, and examples.'], pitfalls: ['Use /term to search and n/N to navigate.'] },
        which: { what: 'Shows the full path to an executable resolved in your $PATH.', when: ['Confirm which python/node is used.'], pitfalls: ['Aliases/functions won\'t appear; use type -a cmd to see all.'] },
        // ... rest of explanations would continue here
      };

      // For each h3, attach an explanation box after the first following <pre>
      document.querySelectorAll('h3').forEach(h3 => {
        const id = h3.id;
        const info = EXPLAINS[id];
        const pre = h3.nextElementSibling && h3.nextElementSibling.tagName === 'PRE' ? h3.nextElementSibling : null;
        if (!pre) return;
        const box = document.createElement('div');
        box.className = 'explain';
        const what = info?.what || 'Explanation: This block demonstrates typical usage of the command above.';
        const when = info?.when || ['Use the shown flags as a starting point.'];
        const pitfalls = info?.pitfalls || [];
        box.innerHTML = `<h4>Explanation</h4><p>${what}</p>` +
          (when.length ? `<h4>Useful when</h4><ul>${when.map(x=>`<li>${x}</li>`).join('')}</ul>` : '') +
          (pitfalls.length ? `<h4>Common pitfalls</h4><ul>${pitfalls.map(x=>`<li>${x}</li>`).join('')}</ul>` : '');
        pre.insertAdjacentElement('afterend', box);
      });
    })();
  </script>
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</body>
</html>